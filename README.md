# Модуль "ОТДЕЛЫ"
### Новые сущности в панели администартора и витрине.

Добавлен интерфейс управления списком отделов на базе **CS-Cart**;
Добавлены страницы со списком отделов и карточкой отдела для повышения лояльности покупателей сайтаю

## Добавленый функционал

В меню панели **Администратора** реализовано:

1. При переходе в меню **Покупатели > Отделы** отображается интерфейс управления отделами. Основные функции:
- Возможность удалить отдел
- Возможность перейти на страницу создания отдела
- Возможность перейти на страницу редактирования отдела
- Возможность поменять статус отдела (см. раздел Поля отдела)
- Возможность сортировки по полям таблицы (название, статус)
- Паджинация

Список отделов содержит поля: *логотип, название, дата создания, статус*.

2. При создании **нового отдела** реализована возможность добавления и редактирования следующих полей:
- Логотип
- Название
- Описание
- Руководитель
- Сотрудники
- Статус отдела
- Дата создания отдела

При редактировании отдела доступны поля аналогичные созданию нового отдела.

В **Витрине магазина** добавлена новая страница списка отделов **"Отделы"**:
Переход на страницу находится в выпадаеющем списке **"My account" > "Отделы"**

1. На списке **Отделов** в витрине отображаются следующие поля отдела:
- логотип (доступна возможность перехода по клику на **карточку отдела**)
- название отдела (доступна возможность перехода по клику на **карточку отдела**)
- фамилия и имя руководителя

На списке отделов реализована паджинация, а также отображаются только отделы со статусом Вкл.

2. На **карточке отдела** в **Витрине магазина** отображены:
- логотип
- описание
- список сотрудников отдела
## Рекомендации по установке приложения:

- Движок для интернет-магазина CMS CS-Cart нужно устанавливать на сервер, чтобы ваш магазин был доступен в Интернете. Перед установкой убедитесь, что ваш сервер соответствует требованиям. Тип сервера подойдет любой: от обычного виртуального хостинга до выделенного сервера. Достаточно одноядерного процессора частотой 2.4 ГГц, 1 Гб оперативной памяти и 10 Гб на жестком диске.
- Операционная система сервера — Linux или любая другая Unix-система.
- Также для работы магазина на сервере должны быть три обязательных компонента: PHP 5.6 или новее, MySQL 4.1 или новее и Apache в качестве веб-сервера.

- Более подробно о системных требования можно узнать здесь: https://www.cs-cart.ru/docs/4.3.x/install/requirements/


### Установка модуля

Данное приложение для интернет-магазина CMS CS-Cart написано с использованием: PHP Version 7.4.3 и CMS CS-Cart Version 4.14.3 B2C
## Как установить новый модуль "Departments" в CS-Cart

1. Скачать zip-файл с репозитория на GitHub по ссылке https://github.com/NailKhabibullin/sd_depart.git 
- в закладке **"<>Code"** нажать кнопку зеленого цвета **"Code"**
- в развернувшемся окне внизу нажать кнопку **"Download ZIP"** и скачать файл,

2. Загрузить и установить модуль в меню панели администратора
- в панели администратора на странице **“Модули” → “Управление модулями”** нажмите на шестерёнку и выберите пункт **“Ручная установка”**.
- в открывшемся окне выберите файл модуля. Загрузите файл в формате zip с локального компьютера кнопкой **“Загрузить”**.
- нажмите **“Загрузить и установить”**.

Путь на англоязычной версии CS-Cart: **“Add-ons” → “Manage add-ons” → нажать на кнопку с шестеренкой → “Manual installation” → “Local” → “Upload & install”**

Так же на страница **“Модули” → “Управление модулями”** вы можете:
- установить/удалить и включить/выключить модуль;
- посмотреть доступные обновления для модуля и применить их;
- посмотреть список недавно добавленных модулей, добавить модуль в избранное;
- сделать поиск по модулям с различными фильтрами;
- перейти на страницу редактирования настроек модуля.

Модули настраиваются на вкладке **“Настройки”** на странице, которая открывается по нажатию на название модуля. Модуль может не иметь настроек.

Справа от названия модуля нажмите **“Открыть”** и в выпадающем списке нажмите на название страницы, созданной модулем.
Нажмите на название модуля, перейдите на вкладку **“Общее”**. В разделе **“Где взаимодействовать”** с этим модулем расположены ссылки на дополнительные страницы.

После установки модуля можно провести проверку его функционала

### Проверка в разделе “Администратора”

При переходе в меню **“Покупатели” → “Отделы”** отображается интерфейс управления отделами. Основные функции: 
- Возможность удалить отдел. В строке нужного вам отдела необходимого отдела нажать кнопку с шестеренкой. В выпавшем окне нажать **“Удалить”**;
- Возможность перейти на страницу создания отдела. Необходимо нажать на кнопку **“+”** в правом верхнем углу окна;
- Возможность перейти на страницу редактирования отдела. В строке нужного вам отдела необходимого отдела нажать кнопку с шестеренкой. В выпавшем окне нажать **“Редактировать”**;
- Возможность поменять статус отдела. Изменяется нажатием соответствующего поля в столбце **“Статус”**;
- Возможность сортировки по полям таблицы (название, статус). Необходимо нажать на соответствующие поля наименований списка отделов;
- Паджинация. (появление этой функции возникает при заполнении страницы данными о более чем 6-ти отделах). 

При переходе в меню **“Покупатели” → “Отделы” → “Добавить новый отдел”** отображается интерфейс создания/редактирования отдела. 

Реализована возможность добавления и редактирования следующих полей:
- Логотип. Добавляется путем загрузки с локального компьютера, с сервера или по URL;
- Название. Реализуется ручным вводом текста;
- Описание. Реализуется ручным вводом текста;
- Руководитель. Выбирается из выпадающего списка Пользователей (нажать кнопку “+Добавить из списка пользователей”) путем проставления пикера и нажатия кнопки **“Выбрать”**;
- Сотрудники. Выбирается из выпадающего списка Пользователей (нажать кнопку “+Добавить из списка пользователей”) путем проставления пикера и нажатия кнопки **“Добавить пользователей и закрыть”**;
- Статус отдела. Выбирается проставлением пикера **Вкл./Выкл.** в поле **“Статус”**;
- Дата создания отдела. Выставляется автоматически. При необходимости редактируется вручную.
- Внесенные изменения сохраняются нажатием кнопки в правом верхнем углу **“Сохранить”**.

При редактировании отдела доступны поля аналогичные созданию нового отдела.
### Проверка в разделе “Витрина магазина”
#### Вариант А:

Для проверки функционала в данном разделе необходимо войти в него от имени зарегистрированного пользователя. 

Или же в разделе **Администратора** пройти по меню: **“Покупатели” → “Покупатели”**. И зайти в магазин от имени любого покупателя. Для этого необходимо в строке выбранного Пользователя нажать на кнопку с шестеренкой и выбрать в выпадающем меню: **“Войти как пользователь”**. После нажатия вас перенесет в окно “Витрины магазина”.

Переход на страницу **“Отделы”** находится в выпадающем списке **"My account" → "Отделы"**.

 1. На списке **“Отделов”** в витрине отображаются следующие поля отдела:
- логотип. Доступна возможность перехода по клику на “карточку отдела”.
- название отдела. Доступна возможность перехода по клику на “карточку отдела”.
- фамилия и имя руководителя.

На списке отделов реализована паджинация, а также отображаются только отделы со статусом Вкл.  

2. Переход на страницу просмотра Отдела (“карточка отдела”) можно произвести путем нажатия или на Наименование Отдела или на Логотип Отдела в окне **“Отделы”**
На “карточке отдела” отображены: 
- логотип
- описание
- список сотрудников отдела
#### Вариант В:

При необходимости можно реализовать возможность размещения раздела **“Отделы”** в элементах главного меню **“Витрины магазина”**.

Для этого необходимо в разделе **“Администратора”** пройти по **“Дизайн” → “Меню”  → “Main menu”**.

Добавить раздел путем нажатия кнопки **“+”** (“Добавить элемент”)

В открывшемся окне в разделе 
- Родительский элемент: указать -Корневой уровень-
- Название: Departments
- URL: profiles.departments

После обновления (при необходимости почистить кэш) в разделе главного меню  **“Витрины магазина”**. появится элемент **“Departments”**. При нажатии на него вас перенесет на страницу **“Отделы”**.  В данном случае этот элемент будет доступен по умолчанию.

Все остальные действия производить с *п.1 Варианта А* Проверки в разделе “Витрина магазина”.
